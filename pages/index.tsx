import Head from 'next/head';
import { Carousel, Categories } from '../components/Carousel';
import { Layout } from '../components/Layout';
import { SearchInput } from '../components/SearchInput';

const popularCategories: Categories = [
  { name: 'Streaming', api: 'discover?category=tv&monetization=flatrate' },
  { name: 'On TV', api: 'tv?category=popular&page=1' },
  { name: 'In Theatre', api: 'movies?category=now_playing&page=1' },
  { name: 'For Rent', api: 'discover?category=movie&monetization=rent' },
];
const freeCategories: Categories = [
  { name: 'Movies', api: 'discover?category=movie&monetization=free' },
  { name: 'TV', api: 'discover?category=tv&monetization=free' },
];
const trailerCategories: Categories = [
  {
    name: 'Streaming',
    api: 'videos',
  },
  { name: 'TV', api: 'discover?category=tv&monetization=free' },
];
const trendingCategories: Categories = [
  { name: 'Today', api: 'trending?category=day' },
  { name: 'This Week', api: 'trending?category=week' },
];

const Hero = ({ bgImage }: { bgImage?: string }) => {
  return (
    <div className="bg-blue-800 p-4 ">
      <div className="text-white my-4">
        <h1 className="text-5xl font-bold">Welcome.</h1>
        <h2 className="text-3xl">
          Millions of movies, TV
          <br /> shows and people to discover. Explore now.
        </h2>
        <form className="flex justify-between bg-white rounded-3xl mt-4">
          <SearchInput />
          <button className="bg-green-500  font-semibold py-3 px-6  rounded-3xl">Search</button>
        </form>
      </div>
    </div>
  );
};

const Home = () => {
  return (
    <Layout>
      <Head>
        <title>HELLO</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Hero />
      <div>
        <Carousel title="What's Popular" categories={popularCategories} />
        <Carousel title="Free to Watch" categories={freeCategories} />
        {/* TRAilers API endpoint not available yet */}
        {/* <Carousel title="Latest Trailers" categories={trailerCategories} background videos /> */}
        <Carousel title="Trending" categories={trendingCategories} />
      </div>
      {/* <MoviesGrid data={data} api="movies" /> */}
    </Layout>
  );
};

// export const getServerSideProps = async () => {
// `https://api.themoviedb.org/3/movie/popular?api_key=${
//   process.env.MOVIES_API
// }&language=en-US&page=${1}`;

//   const data = await fetch(
//     `https://api.themoviedb.org/3/trending/all/week?api_key=${process.env.MOVIES_API}`
//   ).then((res) => res.json());
//   const filteredResults = filterResults(data.results);
//   return {
//     props: {
//       data: {
//         ...data,
//         results: filteredResults,
//         total_results: filteredResults.length,
//       },
//     },
//   };
// };

export default Home;
